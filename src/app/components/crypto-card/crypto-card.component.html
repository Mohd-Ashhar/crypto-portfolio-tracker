<div class="card h-100 shadow-sm crypto-card">
  <div class="card-body">
    <div class="d-flex align-items-center mb-3">
      <img [src]="crypto.image" width="40" height="40" class="me-3" />
      <div class="flex-grow-1">
        <h6 class="mb-0">{{ crypto.name }}</h6>
        <small class="text-muted">{{ crypto.symbol | uppercase }}</small>
      </div>
      <span
        class="badge"
        [class.bg-success]="crypto.price_change_percentage_24h >= 0"
        [class.bg-danger]="crypto.price_change_percentage_24h < 0"
      >
        {{ crypto.price_change_percentage_24h | number : '1.2-2' }}%
      </span>
    </div>

    <div class="mb-2">
      <h4 class="mb-1">${{ crypto.current_price | number : '1.2-2' }}</h4>
      <div class="row small text-muted">
        <div class="col-6">
          <i class="bi bi-arrow-up-circle text-success"></i>
          ${{ crypto.high_24h | number : '1.2-2' }}
        </div>
        <div class="col-6">
          <i class="bi bi-arrow-down-circle text-danger"></i>
          ${{ crypto.low_24h | number : '1.2-2' }}
        </div>
      </div>
    </div>

    <div class="small mb-2">
      <div><strong>Market Cap:</strong> ${{ crypto.market_cap | number : '1.0-0' }}</div>
      <div><strong>Volume:</strong> ${{ crypto.total_volume | number : '1.0-0' }}</div>
    </div>

    <button class="btn btn-sm btn-outline-primary w-100" (click)="toggleAddForm()">
      <i class="bi bi-plus-circle"></i> Add to Portfolio
    </button>

    <div *ngIf="showAddForm" class="mt-3">
      <div class="input-group input-group-sm">
        <input
          type="number"
          class="form-control"
          [(ngModel)]="quantity"
          placeholder="Quantity"
          min="0"
          step="0.01"
        />
        <button class="btn btn-success" (click)="addToPortfolio()" [disabled]="quantity <= 0">
          Add
        </button>
      </div>
    </div>
  </div>
</div>
